<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}해피콜 시스템{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script>
    tailwind.config = {
        theme: {
            extend: {
                fontFamily: { sans: ['Pretendard', 'system-ui', 'sans-serif'] },
                colors: {
                    brand: { 50:'#eef2ff', 100:'#e0e7ff', 200:'#c7d2fe', 300:'#a5b4fc', 400:'#818cf8', 500:'#6366f1', 600:'#4f46e5', 700:'#4338ca', 800:'#3730a3', 900:'#312e81' },
                    surface: { 50:'#f8fafc', 100:'#f1f5f9', 200:'#e2e8f0', 300:'#cbd5e1' }
                }
            }
        }
    }
    </script>
    <style>
        body { font-family: 'Pretendard', system-ui, sans-serif; }
        .glass { background: rgba(255,255,255,0.7); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.3); }
        .glass-dark { background: rgba(30,27,75,0.85); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .gradient-card { background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); }
        .status-normal { background: linear-gradient(135deg, #10b981, #059669); color: white; }
        .status-abnormal { background: linear-gradient(135deg, #ef4444, #dc2626); color: white; }
        .status-pending { background: linear-gradient(135deg, #f59e0b, #d97706); color: white; }
        .status-resolved { background: linear-gradient(135deg, #6366f1, #4f46e5); color: white; }
        .card-hover { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .card-hover:hover { transform: translateY(-4px); box-shadow: 0 20px 40px -12px rgba(0,0,0,0.15); }
        .fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity:0; transform:translateY(8px); } to { opacity:1; transform:translateY(0); } }
        .btn-primary { background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%); transition: all 0.2s; }
        .btn-primary:hover { background: linear-gradient(135deg, #4f46e5 0%, #4338ca 100%); transform: translateY(-1px); box-shadow: 0 8px 24px -4px rgba(79,70,229,0.4); }
        .btn-danger { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); transition: all 0.2s; }
        .btn-danger:hover { transform: translateY(-1px); box-shadow: 0 8px 24px -4px rgba(239,68,68,0.4); }
        .btn-success { background: linear-gradient(135deg, #10b981 0%, #059669 100%); transition: all 0.2s; }
        .btn-success:hover { transform: translateY(-1px); box-shadow: 0 8px 24px -4px rgba(16,185,129,0.4); }
        .shimmer { background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%); background-size: 200% 100%; animation: shimmer 1.5s infinite; }
        @keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
        .toast { animation: slideIn 0.4s ease-out, fadeOut 0.4s ease-in 3s forwards; }
        @keyframes slideIn { from { transform:translateX(100%); opacity:0; } to { transform:translateX(0); opacity:1; } }
        @keyframes fadeOut { from { opacity:1; } to { opacity:0; } }
    </style>
    {% block head %}{% endblock %}
</head>
<body class="bg-surface-50 min-h-screen flex flex-col">
    <nav class="glass-dark text-white sticky top-0 z-50 shadow-lg shadow-indigo-900/10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <a href="/" class="flex items-center gap-3 group">
                    <div class="w-9 h-9 rounded-xl bg-gradient-to-br from-indigo-400 to-purple-500 flex items-center justify-center shadow-lg shadow-indigo-500/30 group-hover:shadow-indigo-500/50 transition-shadow">
                        <i class="fas fa-headset text-sm"></i>
                    </div>
                    <span class="text-lg font-bold tracking-tight">HappyCall</span>
                </a>
                {% if current_user.is_authenticated %}
                <div class="flex items-center gap-3">
                    <div class="hidden sm:flex items-center gap-2 bg-white/10 rounded-full px-4 py-1.5">
                        <div class="w-6 h-6 rounded-full bg-gradient-to-br from-indigo-400 to-purple-400 flex items-center justify-center text-xs font-bold">
                            {{ current_user.username[:1] }}
                        </div>
                        <span class="text-sm font-medium text-white/90">{{ current_user.username }}</span>
                        <span class="text-xs px-2 py-0.5 rounded-full {% if current_user.role == 'admin' %}bg-amber-500/20 text-amber-300{% else %}bg-emerald-500/20 text-emerald-300{% endif %}">
                            {{ '관리자' if current_user.role == 'admin' else '프리랜서' }}
                        </span>
                    </div>
                    <a href="{{ url_for('auth.logout') }}" class="flex items-center gap-1.5 text-white/70 hover:text-white text-sm px-3 py-2 rounded-lg hover:bg-white/10 transition-all">
                        <i class="fas fa-arrow-right-from-bracket text-xs"></i>
                        <span class="hidden sm:inline">로그아웃</span>
                    </a>
                </div>
                {% endif %}
            </div>
        </div>
    </nav>

    <main class="flex-1 max-w-7xl mx-auto w-full px-4 sm:px-6 lg:px-8 py-8">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
            <div class="fixed top-20 right-6 z-50 space-y-2">
                {% for category, message in messages %}
                <div class="toast glass rounded-xl px-5 py-3 shadow-xl flex items-center gap-3 max-w-sm
                    {% if category == 'error' %}border-l-4 border-red-500{% elif category == 'success' %}border-l-4 border-emerald-500{% elif category == 'warning' %}border-l-4 border-amber-500{% else %}border-l-4 border-blue-500{% endif %}">
                    <i class="{% if category == 'error' %}fas fa-circle-xmark text-red-500{% elif category == 'success' %}fas fa-circle-check text-emerald-500{% elif category == 'warning' %}fas fa-triangle-exclamation text-amber-500{% else %}fas fa-circle-info text-blue-500{% endif %}"></i>
                    <span class="text-sm font-medium text-gray-800">{{ message }}</span>
                </div>
                {% endfor %}
            </div>
            {% endif %}
        {% endwith %}

        <div class="fade-in">
            {% block content %}{% endblock %}
        </div>
    </main>

    <footer class="border-t border-surface-200 bg-white/50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
            <p class="text-center text-xs text-gray-400">&copy; 2024 HappyCall Audit System. All rights reserved.</p>
        </div>
    </footer>
</body>
</html>
